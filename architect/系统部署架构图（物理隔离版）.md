## 🏛️ 系统部署架构：防御堡垒 (The Fortress Architecture)

本架构将系统划分为三个严格隔离的网络区域，通过单向或受限的通信隧道进行交互。

### 1. 策略计算区：AI 智能体大脑 (Intelligence Zone)

**定位：** 非信任区 (Untrusted/Low Security)，负责逻辑密集型任务。

* **部署组件：**
* **AI Strategy Engine：** 运行各种 Agent 策略逻辑，通过 **模块 1.2** 适配器调用外部协议。
* **Trace ID Logger：** 记录全链路日志，为 **模块 6.1** 提供可视化数据。
* **User/Admin Web Portal：** 供管理人员监控资产水位线及审批大额交易。


* **通信限制：** 仅允许访问外部数据源（Twitter, Snapshot, Subgraph）及对内发送无签名 Payload。

### 2. 模拟验证区：安全沙盒 (Sandbox & Validation Zone)

**定位：** 高信任区 (Trusted/Mid Security)，系统的“安检站”。

* **部署组件：**
* **Anvil Fork Node：** 模块 2.2 的核心，实时分叉主网数据进行 **G2/G4** 精度与压力模拟。
* **Sync Sentinel (水位线监控)：** 模块 4.1，对比 RPC 状态，若落后超过 2 个区块则物理切断发单。
* **Triple-Oracle Guard：** 模块 2.1，实时聚合 Chainlink、TWAP 与 Slot0 价格进行偏离度校验。
* **Idempotent FSM (状态机)：** 模块 3.1，管理交易从 `INIT` 到 `CONFIRMED` 的全生命周期，防止重复发单。


* **通信限制：** 只能通过专用 RPC 节点与区块链交互，仅能向签名区发送经过验证的交易请求。

### 3. 核心签名区：资产金库 (Security Vault Zone)

**定位：** 极高安全区 (Hardened/High Security)，物理级隔离。

* **部署组件：**
* **MPC Signing Nodes：** 模块 5.1，分布式存放私钥分片，绝不拼接完整私钥。
* **Whitelist Enforcement Proxy：** 强制校验 Payload 的目标地址。若不在 **模块 1.2** 注册表白名单内，直接物理拒绝签名。
* **Human-Approval Gate：** 当单笔交易 $\text{Value} > \$10,000$ 时，触发物理挂起，等待管理员手动授权。


* **通信限制：** **物理隔离或私有专线连接**。禁止访问互联网，仅接受验证区推送的哈希摘要进行签名。

---

## 🏗️ 物理组件与网络拓扑

| 逻辑区域 | 建议物理环境 | 防火墙/安全组规则 |
| --- | --- | --- |
| **外部网络** | 公链 RPC / MEV Relay | 仅允许公网入站响应 |
| **策略区** | 阿里云/AWS (VPC-A) | 允许 443 端口对外请求 AI 语料 |
| **验证区** | 高性能本地服务器/专属私有云 (VPC-B) | 仅接受 VPC-A 的 Payload 提交；仅允许访问指定的区块链 RPC 节点 |
| **签名区** | 独立物理机群 (Bare Metal / HSM) | **零公网访问**；仅接受来自 VPC-B 的双向 TLS 认证连接 |

---

## 🛡️ 极端故障下的物理响应 (Hard-Wired Resiliency)

* **RPC 节点宕机：** **Sync Sentinel** 检测到水位线停滞，验证区立即停止向签名区发送任何 Payload，进入 **Phase 2** 定义的熔断状态。
* **AI 策略服务器被黑：** 黑客无法更改签名区的合约白名单，大额资金转出将触发 **G8** 人工审批，且 **Guardian** 可以在 24h 时间锁内行使一票否决权。
* **黑天鹅/协议被黑：** 管理员通过 Web Portal 触发 **Global Kill Switch**，验证区立即绕过策略层，直接向签名区推送全量 `Revoke` 授权指令。
